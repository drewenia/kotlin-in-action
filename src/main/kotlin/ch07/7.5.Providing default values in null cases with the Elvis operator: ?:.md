# Providing default values in null cases with the Elvis operator: ?:

Kotlin, null yerine default value sağlamak için kullanışlı bir operator’e sahiptir; buna Elvis operator (ya da daha
ciddi isimleri tercih edersen null-coalescing operator) denir. Şu şekilde görünür: ?: (başını yana çevirirsen Elvis’e
benzetebilirsin). İşte nasıl kullanıldığı:

```kotlin
fun greet(name: String?) {
    val recipient: String = name ?: "unnamed"
    println("Hello, $recipient")
}

fun main() {
    greet(null) // Hello, unnamed
}
```

Bu operator iki value alır ve result’ı, ilk value null değilse ilk value, ilk value null ise ikinci value olur:

Elvis operator, null yerine belirtilmiş bir value’yu ikame eder. Bu, sol taraftaki expression null olursa bir default
value sağlamana olanak tanır.

![img_2.png](assets/img_2.png)

Elvis operator, method’un call edildiği object null olduğunda null dışında bir value ikame etmek için çoğunlukla
safe-call operator ile birlikte kullanılır.

```kotlin
fun strLenSafe(str: String?): Int = str?.length ?: 0

fun main() {
    println(strLenSafe("abc")) // 3
    println(null) // null
}
```

Daha önce ele aldığımız countryName function’ının implementation’ı artık tek, zarif bir expression içine de sığmaktadır:

```kotlin
class Address(val streetAddress: String, val zipCode: Int, val city: String, val country: String)

class Company(val name: String, val address: Address?)

class Person(val name: String, val company: Company?)

fun Person.countryName() = company?.address?.country ?: "unknown"

fun main() {
    val person = Person("Dimitri", null)
    println(person.countryName()) // unknown
}
```

Elvis operator’ü Kotlin’de özellikle kullanışlı kılan şey, return ve throw gibi operation’ların expression olarak
çalışması ve bu nedenle operator’ün sağ tarafında kullanılabilmesidir. Bu durumda, sol taraftaki value null ise,
function belirtilen value’yu hemen return eder ya da belirtilen exception’ı throw eder. Bu, bir function’daki
precondition’ları kontrol etmek için faydalıdır.

Bu operator’ü, bir kişinin company address’ini içeren bir shipping label yazdıran bir function’ı implement etmek için
nasıl kullanabileceğini görelim. Bir sonraki kod, tüm class declaration’larını tekrar eder—Kotlin’de bunlar o kadar
concise’tir ki bu bir problem oluşturmaz.

```kotlin
class Address(val streetAddress: String, val zipCode: Int, val city: String, val country: String)

class Company(val name: String, val address: Address?)

class Person(val name: String, val company: Company?)

fun printShippingLabel(person: Person) {
    val address = person.company?.address ?: throw IllegalArgumentException("No address")
    with(address) {
        println(streetAddress)
        println("$zipCode $city, $country")
    }
}

fun main() {
    val address = Address("Elsestr. 47", 80687, "Munich", "Germany")
    val jetbrains = Company("JetBrains", address)
    val person = Person("Dimitri", jetbrains)
    val person2 = Person("Alexey", null)

    printShippingLabel(person)
    // Elsestr. 47
    // 80687 Munich, Germany

    printShippingLabel(person2) // java.lang.IllegalArgumentException: No address
}
```

printShippingLabel function’ı, her şey doğruysa bir label yazdırır. Eğer address yoksa, yalnızca bir satır numarasıyla
birlikte bir NullPointerException fırlatmak yerine, anlamlı bir error bildirir. Eğer bir address mevcutsa, label; street
address, zip code, city ve country’den oluşur. 5.4.1 bölümünde gördüğün with function’ının, address’i art arda dört kez
tekrar etmekten kaçınmak için nasıl kullanıldığına dikkat et. Genellikle bir nesneyle ilgili işlemleri gruplamak ve "bu
nesneyle şu şu işlemleri yap" demek için kullanılır.

Artık Kotlin’de “if not null” check’lerini gerçekleştirmenin yolunu biliyorsun. Şimdi, instanceof check’lerinin
Kotlin-safe versiyonundan bahsedelim: safe-cast operator. Bu operator, çoğu zaman safe-call ve Elvis operator’leriyle
birlikte karşımıza çıkar.

Examples;

Simple -> Default value

```kotlin
fun main() {
    returnDisplayName(null)
    returnDisplayName("Alex")
}

fun returnDisplayName(userName : String?) {
    val displayName = userName ?: "Guest"
    println(displayName)
    // Guest
    // Alex
}
```

Safecall use;

```kotlin
fun main() {
    val user1 = returnUserNameLength("Alex")
    val user2 = returnUserNameLength(null)
    println("User 1 : $user1, User 2 : $user2") // User 1 : 4, User 2 : 0
}

fun returnUserNameLength(userName : String?) : Int {
    return userName?.length ?: 0
}
```

```kotlin
fun main() {
    val db = Database()
    // Veri tabanından email gelmezse "Email bulunamadı" yazdırır.
    val email = db.getEmail() ?: "Email bulunamadı"
}

class Database {
    fun getEmail(): String? = null
}
```