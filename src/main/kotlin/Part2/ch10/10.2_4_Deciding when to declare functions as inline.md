# Deciding when to declare functions as inline

inline keyword’ünün faydalarını öğrendiğinize göre, codebase’inizin tamamında inline kullanmayı ve böylece daha hızlı
çalışmasını sağlamayı düşünebilirsiniz. Ancak görüldüğü üzere, bu iyi bir fikir değildir. inline keyword’ünü kullanmak,
büyük olasılıkla yalnızca argument olarak lambda alan function’larda performance’ı iyileştirir; diğer tüm durumlar ek
inceleme, ölçüm ve application profiling’i gerektirir.

Normal function call’lar için JVM zaten güçlü bir inlining desteği sağlar. Code’unuzun execution’ını analiz eder ve
inlining yapmak en çok faydayı sağladığında call’ları inline eder. Bu, bytecode’u machine code’a çevirirken otomatik
olarak gerçekleşir. Bytecode’da, her function’ın implementation’ı yalnızca bir kez tekrarlanır ve Kotlin’in inline
function’larında olduğu gibi function’ın çağrıldığı her yere kopyalanmasına gerek yoktur. Üstelik, function doğrudan
çağrıldığında stacktrace daha net olur.

Öte yandan, lambda argument’lı function’ları inline etmek faydalıdır. Öncelikle, inline ile önlediğiniz overhead daha
önemlidir. Sadece call’dan değil, her lambda için ek class ve lambda instance’ı için bir object oluşturulmasından da
tasarruf edersiniz. İkinci olarak, JVM şu anda call ve lambda üzerinden her zaman inlining yapacak kadar akıllı
değildir. Son olarak, inline etmek, normal lambda’larla çalıştırılması imkansız olan özellikleri kullanmanıza olanak
tanır; örneğin non-local return’lar, ki bunu bu chapter’da daha sonra tartışacağız.

inline modifier’ını kullanıp kullanmamaya karar verirken code boyutuna hâlâ dikkat etmelisiniz. Inline yapmak
istediğiniz function büyükse, bytecode’unu her call site’a kopyalamak, bytecode boyutu açısından maliyetli olabilir. Bu
durumda, lambda argument’larla ilgili olmayan code’u ayrı bir non-inline function’a çıkarmayı deneyebilirsiniz. Kendiniz
görebilirsiniz ki, Kotlin standard library’deki inline function’lar her zaman küçüktür.

Şimdi, higher-order function’ların code’unuzu nasıl iyileştirmenize yardımcı olabileceğine bakalım.